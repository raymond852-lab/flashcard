<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Daddy's Real Dictation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
  body {margin:0;background:linear-gradient(#B2EBF2,#81D4FA);font-family:-apple-system,sans-serif;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:#004D40;}
  h1 {font-size:10vw;margin-bottom:8vh;}
  #startBtn {padding:6vw 20vw;font-size:9vw;border:none;border-radius:30px;background:#FF9800;color:white;box-shadow:0 15px 40px rgba(0,0,0,0.4);cursor:pointer;}
  #main {display:none;flex-direction:column;align-items:center;justify-content:center;height:100vh;width:100vw;background:#B2EBF2;}
  #bigText {font-size:18vw;font-weight:bold;margin:10vh 0;min-height:30vh;}
  #secret {width:80vw;padding:4vw;font-size:7vw;border-radius:25px;border:none;text-align:center;margin:8vh 0;opacity:0.9;}
  #buttons button {margin:3vw;padding:4vw 10vw;font-size:8vw;border:none;border-radius:25px;background:#004D40;color:white;cursor:pointer;}
  canvas {position:fixed;top:0;left:0;pointer-events:none;z-index:999;}
</style>
</head>
<body>

<div id="start">
  <h1>Real Dictation<br>with Daddy</h1>
  <button id="startBtn">Start</button>
</div>

<div id="main">
  <div id="bigText">Press Play when ready</div>
  <input id="secret" placeholder="Daddy types correct answer here (secret)" autocomplete="off">
  <div id="buttons">
    <button onclick="playAgain()">Play Again</button>
    <button onclick="check()">Check</button>
    <button onclick="next()">Next Word</button>
  </div>
</div>

<canvas id="confetti"></canvas>
<audio id="clap" src="https://www.soundjay.com/human/applause-01.mp3"></audio>
<audio id="win" src="https://www.soundjay.com/misc/success-1.mp3"></audio>

<script>
  let correct = 0, total = 0, currentAnswer = "";

  document.getElementById('startBtn').onclick = () => {
    document.getElementById('start').style.display = 'none';
    document.getElementById('main').style.display = 'flex';
  };

  function playAgain() {
    document.getElementById('bigText').textContent = 'Listening…';
    document.getElementById('secret').focus();
    // You can speak aloud here — or let the British lady speak if you type the word first
    if (currentAnswer) {
      const u = new SpeechSynthesisUtterance(currentAnswer);
      u.lang = 'en-GB';
      speechSynthesis.speak(u);
    }
  }

  function check() {
    total++;
    const typedByDaddy = document.getElementById('secret').value.trim();
    if (!typedByDaddy) { alert("Daddy, please type the correct answer first!"); return; }

    currentAnswer = typedByDaddy;
    // Here you look at your son’s paper and decide:
    const sonIsCorrect = confirm("Is his writing correct? Click OK = Correct, Cancel = Wrong");

    if (sonIsCorrect) {
      correct++;
      document.getElementById('bigText').innerHTML = 'Correct!<br>Super Star!';
      document.getElementById('bigText').style.color = '#2E7D32';
      document.getElementById('clap').play();
      if (correct % 5 === 0) starRain();
      if (correct === total) setTimeout(victory, 1000);
    } else {
      document.getElementById('bigText').innerHTML = 'Oops!<br>Correct answer:<br><b>' + currentAnswer + '</b>';
      document.getElementById('bigText').style.color = '#C62828';
    }
  }

  function next() {
    document.getElementById('secret').value = '';
    currentAnswer = '';
    document.getElementById('bigText').textContent = 'Press Play when ready';
    document.getElementById('bigText').style.color = '#004D40';
  }

  function starRain() { /* same as before */ confettiBurst('#FFD700'); }
  function victory() { document.getElementById('win').play(); confettiBurst(); }

  function confettiBurst(col = null) {
    const c = document.getElementById('confetti'); c.style.display='block';
    c.width = innerWidth; c.height = innerHeight;
    const ctx = c.getContext('2d');
    const cols = col ? [col] : ['#f00','#ff0','#0f0','#0ff','#f0f'];
    const p = [];
    for(let j=0;j<400;j++) p.push({x:innerWidth/2,y:innerHeight/2,c:cols[j%cols.length],a:Math.random()*Math.PI*2,v:Math.random()*10+8});
    let t=0;
    const anim = setInterval(()=>{
      ctx.clearRect(0,0,c.width,c.height);
      p.forEach(o=>{o.x+=Math.cos(o.a)*o.v; o.y+=Math.sin(o.a)*o.v+2; if(o.y>c.height)o.y=-50;
        ctx.fillStyle=o.c; ctx.fillRect(o.x,o.y,18,18);});
      if(++t>100) {clearInterval(anim); c.style.display='none';}
    },20);
  }
</script>
</body>
</html>
