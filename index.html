<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>P1 Dictation Fun</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    * {margin:0;padding:0;box-sizing:border-box;}
    body {
      height:100vh;width:100vw;overflow:hidden;
      background:linear-gradient(135deg,#B2EBF2,#81D4FA);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
      display:flex;align-items:center;justify-content:center;
    }
    #landing {
      text-align:center;color:#004D40;
      padding:8vw;
      animation:fadeIn 1s ease-in;
    }
    h1 {
      font-size:12vw;
      margin-bottom:8vh;
      text-shadow:0 4px 10px rgba(0,0,0,0.2);
    }
    .btn {
      display:block;width:80vw;max-width:400px;margin:5vh auto;
      padding:5vw 0;font-size:9vw;font-weight:bold;
      background:#FF5722;color:white;border:none;border-radius:20px;
      box-shadow:0 8px 20px rgba(0,0,0,0.3);
      cursor:pointer;transform:scale(1);
      transition:all 0.2s;
    }
    .btn:hover {transform:scale(1.05);background:#F50057;}
    .btn:active {transform:scale(0.98);}
    #studyBtn {background:#26A69A;}
    #studyBtn:hover {background:#00695C;}
    #dictateBtn {background:#FF9800;}
    #dictateBtn:hover {background:#E65100;}

    /* Game screen */
    #game {display:none;flex-direction:column;align-items:center;justify-content:center;height:100vh;width:100vw;background:#B2EBF2;}
    #card {
      background:#009688;color:white;width:90vw;height:55vh;border-radius:30px;
      box-shadow:0 15px 40px rgba(0,0,0,0.3);display:flex;align-items:center;justify-content:center;
      font-size:11vw;text-align:center;padding:5vw;font-weight:bold;
      margin-bottom:5vh;
    }
    #card.sentence {font-size:7vw;}
    #input {width:90vw;padding:4vw;font-size:7vw;border-radius:20px;border:none;outline:none;text-align:center;margin:3vh 0;box-shadow:inset 0 5px 15px rgba(0,0,0,0.2);}
    #controls button {
      margin:2vh;padding:3vw 6vw;font-size:6vw;border:none;border-radius:15px;
      background:#004D40;color:white;cursor:pointer;box-shadow:0 5px 15px rgba(0,0,0,0.3);
    }
    #score, #feedback {position:fixed;left:50%;transform:translateX(-50%);padding:2vw 5vw;border-radius:15px;color:white;font-weight:bold;font-size:5vw;z-index:10;}
    #score {top:5vh;background:rgba(0,77,64,0.9);}
    #feedback {top:15vh;background:rgba(0,150,136,0.95);}
    canvas {position:fixed;top:0;left:0;pointer-events:none;z-index:999;}
    @keyframes fadeIn {from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
  </style>
</head>
<body>

  <!-- Beautiful Landing Page -->
  <div id="landing">
    <h1>P1 Dictation</h1>
    <button id="studyBtn" class="btn">Study Mode</button>
    <button id="dictateBtn" class="btn">Dictate Mode</button>
  </div>

  <!-- Game Screen -->
  <div id="game">
    <div id="score">Score: 0/0</div>
    <div id="feedback"></div>
    <div id="card"></div>
    <input id="input" placeholder="Type here..." autocomplete="off">
    <div id="controls">
      <button onclick="speak()">Play Sound</button>
      <button onclick="check()">Check</button>
      <button onclick="next()">Next</button>
      <button onclick="home()">Menu</button>
    </div>
  </div>

  <canvas id="confetti"></canvas>
  <audio id="clap" src="https://www.soundjay.com/human/applause-01.mp3"></audio>

  <script>
    // Your son's exact 10 Dec words (change here every week)
    const words = `o
s
m
h
one
four
nine
they
what
has
have
and
play
our
This is a desk.
This is a bookshelf.
This is a computer.
She has two sharpeners.
Tom has three rulers and six erasers.
We have three pens.
They have five school bags.`.trim().split('\n').map(s=>s.trim());

    let i=0, correct=0, total=0;
    const card=document.getElementById('card'), input=document.getElementById('input'),
          score=document.getElementById('score'), fb=document.getElementById('feedback');

    document.getElementById('studyBtn').onclick=()=>start('study');
    document.getElementById('dictateBtn').onclick=()=>start('dictate');

    function start(mode){
      document.getElementById('landing').style.display='none';
      document.getElementById('game').style.display='flex';
      i=correct=total=0; score.textContent='Score: 0/0'; fb.style.display='none';
      if(mode==='study') {input.style.display='none'; document.querySelector('#controls button:nth-child(2)').style.display='none';}
      else {input.style.display='block'; document.querySelector('#controls button:nth-child(2)').style.display='block';}
      show();
    }
    function home(){location.reload();}
    function show(){
      card.textContent=words[i];
      card.className = words[i].includes('.')?'card sentence':'card';
      input.value=''; fb.style.display='none';
      if(document.getElementById('game').style.display==='flex' && input.style.display==='block') {input.focus(); speak();}
    }
    function next(){i=(i+1)%words.length; show();}
    function speak(){speechSynthesis.cancel(); speechSynthesis.speak(new SpeechSynthesisUtterance(words[i]));}
    function check(){
      total++;
      if(input.value.trim().toLowerCase()===words[i].toLowerCase()){
        correct++; fb.textContent='Correct!'; fb.style.background='#2E7D32';
        document.getElementById('clap').play();
        if(correct===words.length) setTimeout(confetti,800);
      }else{
        fb.textContent='Wrong â†’ '+words[i]; fb.style.background='#C62828';
      }
      fb.style.display='block'; card.style.display='flex'; score.textContent=`Score: ${correct}/${total}`;
    }
    function confetti(){
      const canvas=document.getElementById('confetti'); canvas.style.display='block';
      canvas.width=innerWidth; canvas.height=innerHeight; const ctx=canvas.getContext('2d');
      const pieces=[]; for(let j=0;j<350;j++) pieces.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height-100,color:`hsl(${Math.random()*360},100%,50%)`,speed:Math.random()*8+5});
      let t=0; const anim=setInterval(()=>{
        ctx.clearRect(0,0,canvas.width,canvas.height);
        pieces.forEach(p=>{p.y+=p.speed; if(p.y>canvas.height) p.y=-20; ctx.fillStyle=p.color; ctx.fillRect(p.x+Math.sin(t)*20,p.y,12,12);});
        t+=0.1;
      },20);
      setTimeout(()=>{clearInterval(anim);canvas.style.display='none';},5000);
    }
  </script>
</body>
</html>
