<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>P1 Dictation Fun – 10 Dec</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    body {margin:0;padding:0;height:100vh;width:100vw;overflow:hidden;background:#B2EBF2;font-family:sans-serif;}
    #landing {position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;gap:3vh;align-items:center;text-align:center;}
    h1 {font-size:9vw;color:#26A69A;margin:0;}
    button {padding:2.5vh 6vw;font-size:7vw;border:none;border-radius:2vh;background:#26A69A;color:white;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,0.2);}
    button:hover {background:#4DD0E1;transform:scale(1.05);transition:0.2s;}
    .card {display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#40C4B4;padding:3vh;border-radius:3vh;
           font-size:11vw;line-height:1.3;text-align:center;width:94vw;max-height:70vh;box-sizing:border-box;color:white;
           display:flex;align-items:center;justify-content:center;border:1vh solid #26A69A;box-shadow:0 0 4vh rgba(0,0,0,0.3);}
    .card.sentence {font-size:6.5vw;}
    #input {position:absolute;bottom:28vh;left:50%;transform:translateX(-50%);width:88vw;padding:2.5vh;font-size:6vw;border-radius:2vh;
            border:0.8vh solid #26A69A;display:none;}
    #feedback,#score {position:absolute;left:50%;transform:translateX(-50%);padding:2vh 4vw;border-radius:2vh;font-size:6vw;color:white;display:none;}
    #feedback{top:10vh;background:rgba(38,166,154,0.95);}
    #score{top:4vh;background:rgba(38,166,154,0.85);}
    .btns button {position:absolute;left:50%;transform:translateX(-50%);display:none;background:#26A69A;color:white;
                 border:none;border-radius:2vh;padding:2vh 4vw;font-size:5vw;cursor:pointer;}
    #next{bottom:23vh;} #play{bottom:15vh;} #check{bottom:7vh;} #back{bottom:1vh;} #random{bottom:31vh;}
    canvas{display:none;position:absolute;inset:0;pointer-events:none;z-index:10;}
    @media(orientation:landscape){.card{font-size:9vw;}.card.sentence{font-size:5.5vw;}}
  </style>
</head>
<body>

  <div id="landing">
    <h1>10 Dec Dictation</h1>
    <button onclick="start('study')">Study Mode</button>
    <button onclick="start('dictate')">Dictate Mode</button>
  </div>

  <div id="card" class="card"></div>
  <canvas id="confetti"></canvas>
  <div id="feedback"></div>
  <div id="score"></div>
  <input id="input" placeholder="Type here..." autocomplete="off">
  <button id="next" onclick="next()">Next</button>
  <button id="play" onclick="speak()">Play Sound</button>
  <button id="check" onclick="check()">Check</button>
  <button id="back" onclick="home()">Back to Menu</button>
  <button id="random" onclick="toggleRandom()">Random: OFF</button>

  <audio id="clap" src="https://www.soundjay.com/human/applause-01.mp3"></audio>

  <script>
    // CHANGE THIS LIST EVERY WEEK (your son’s 10 Dec dictation)
    const words = `
o
s
m
h
one
four
nine
they
what
has
have
and
play
our
This is a desk.
This is a bookshelf.
This is a computer.
She has two sharpeners.
Tom has three rulers and six erasers.
We have three pens.
They have five school bags.
    `.trim().split('\n').map(s=>s.trim()).filter(Boolean);

    let idx=0, mode=null, correct=0, total=0, random=false;
    const el = {
      card:document.getElementById('card'),
      input:document.getElementById('input'),
      fb:document.getElementById('feedback'),
      sc:document.getElementById('score'),
      landing:document.getElementById('landing')
    };

    function start(m){mode=m;idx=0;correct=total=0;random=false;document.getElementById('random').textContent='Random: OFF';show();}
    function home(){mode=null;el.landing.style.display='flex';hideAll();el.card.style.display='none';}
    function hideAll(){['input','feedback','score','next','play','check','back','random',document.getElementById('confetti')].forEach(id=>document.getElementById(id).style.display='none');}
    function show(){
      el.landing.style.display='none';
      const w=words[idx];
      el.card.textContent=w;
      el.card.className='card'+(w.includes('.')?' sentence':'');
      el.input.value=''; el.fb.style.display='none';
      if(mode==='study'){
        el.card.style.display='flex';
        el.input.style.display=el.check.style.display='none';
        ['next','play','back','random'].forEach(id=>document.getElementById(id).style.display='block');
        el.sc.style.display='none';
      }else{
        el.card.style.display='none';
        el.input.style.display='block'; el.input.focus();
        ['next','play','check','back','random','score'].forEach(id=>document.getElementById(id).style.display='block');
        el.sc.textContent=`Score: ${correct}/${total}`;
        speak();
      }
    }
    function next(){idx=(idx+1)%words.length;show();}
    function speak(){
      const u=new SpeechSynthesisUtterance(words[idx]);
      u.lang='en-GB';
      speechSynthesis.cancel();
      speechSynthesis.speak(u);
    }
    function check(){
      total++;
      const ans=el.input.value.trim();
      const correctAns=words[idx];
      if(ans.toLowerCase()===correctAns.toLowerCase()){
        correct++;
        el.fb.textContent='Correct! Excellent!';
        el.fb.style.background='rgba(76,175,80,0.95)';
        document.getElementById('clap').play();
        if(correct===words.length) setTimeout(confetti,600);
      }else{
        el.fb.textContent=`Wrong → ${correctAns}`;
        el.fb.style.background='rgba(211,47,47,0.95)';
      }
      el.fb.style.display='block';
      el.card.style.display='flex';
      el.sc.textContent=`Score: ${correct}/${total}`;
    }
    function toggleRandom(){
      random=!random;
      document.getElementById('random').textContent=`Random: ${random?'ON':'OFF'}`;
      if(random) words.sort(()=>Math.random()-0.5);
      else location.reload(); // simplest way to reset order
    }
    function confetti(){
      const c=document.getElementById('confetti'); c.style.display='block';
      c.width=innerWidth; c.height=innerHeight;
      const ctx=c.getContext('2d');
      const p=[];
      for(let i=0;i<300;i++) p.push({x:Math.random()*c.width,y:Math.random()*c.height,c:`hsl(${Math.random()*360},100%,50%)`,s:Math.random()*8+4,a:Math.random()*2*Math.PI,v:Math.random()*5+5});
      let t=0;
      const anim=setInterval(()=>{
        ctx.clearRect(0,0,c.width,c.height);
        p.forEach(o=>{
          o.y+=o.v; o.x+=Math.sin(t+o.a)*2;
          if(o.y>c.height) o.y=-20;
          ctx.fillStyle=o.c; ctx.fillRect(o.x,o.y,o.s,o.s);
        });
        t+=0.1;
      },20);
      setTimeout(()=>{clearInterval(anim);c.style.display='none';},5000);
    }

    // start page
    el.landing.style.display='flex';
  </script>
</body>
</html>
